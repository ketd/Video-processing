{
  "schema_version": "1.0",
  "id": "video-processing-prefab",
  "version": "0.1.0",
  "name": "视频处理预制件",
  "description": "基于 MoviePy 的视频处理工具集，支持视频转音频、视频拼接、视频剪辑、调整大小等常见操作",
  "tags": [
    "video",
    "audio",
    "multimedia",
    "moviepy",
    "video-editing",
    "conversion"
  ],
  "entry_point": "src/main.py",
  "dependencies_file": "pyproject.toml",
  "functions": [
    {
      "name": "video_to_audio",
      "description": "将视频文件转换为音频文件，支持多种音频格式",
      "parameters": [
        {
          "name": "video_path",
          "type": "InputFile",
          "description": "输入视频文件路径",
          "required": true
        },
        {
          "name": "output_path",
          "type": "string",
          "description": "输出音频文件路径（可选，如果不提供则自动生成）",
          "required": false
        },
        {
          "name": "audio_format",
          "type": "string",
          "description": "音频格式（mp3, wav, aac, flac 等），默认为 mp3",
          "required": false,
          "default": "mp3"
        },
        {
          "name": "audio_bitrate",
          "type": "string",
          "description": "音频比特率，默认为 192k",
          "required": false,
          "default": "192k"
        }
      ],
      "returns": {
        "type": "object",
        "description": "包含转换结果的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "output_file": {
            "type": "OutputFile",
            "description": "输出音频文件路径（成功时）",
            "optional": true
          },
          "format": {
            "type": "string",
            "description": "音频格式（成功时）",
            "optional": true
          },
          "duration": {
            "type": "number",
            "description": "音频时长（秒）（成功时）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": ["FILE_NOT_FOUND", "NO_AUDIO_TRACK", "CONVERSION_ERROR"]
          }
        }
      }
    },
    {
      "name": "concatenate_videos",
      "description": "拼接多个视频文件为一个完整的视频",
      "parameters": [
        {
          "name": "video_paths",
          "type": "array",
          "description": "要拼接的视频文件路径列表",
          "required": true
        },
        {
          "name": "output_path",
          "type": "string",
          "description": "输出视频文件路径（可选，如果不提供则自动生成）",
          "required": false
        },
        {
          "name": "transition",
          "type": "string",
          "description": "转场效果（暂不支持，预留参数）",
          "required": false
        }
      ],
      "returns": {
        "type": "object",
        "description": "包含拼接结果的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "output_file": {
            "type": "OutputFile",
            "description": "输出视频文件路径（成功时）",
            "optional": true
          },
          "total_duration": {
            "type": "number",
            "description": "总时长（秒）（成功时）",
            "optional": true
          },
          "video_count": {
            "type": "integer",
            "description": "拼接的视频数量（成功时）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": ["INSUFFICIENT_VIDEOS", "FILE_NOT_FOUND", "CONCATENATION_ERROR"]
          }
        }
      }
    },
    {
      "name": "trim_video",
      "description": "剪辑视频，提取指定时间段的内容",
      "parameters": [
        {
          "name": "video_path",
          "type": "InputFile",
          "description": "输入视频文件路径",
          "required": true
        },
        {
          "name": "start_time",
          "type": "number",
          "description": "开始时间（秒）",
          "required": true
        },
        {
          "name": "end_time",
          "type": "number",
          "description": "结束时间（秒）",
          "required": true
        },
        {
          "name": "output_path",
          "type": "string",
          "description": "输出视频文件路径（可选）",
          "required": false
        }
      ],
      "returns": {
        "type": "object",
        "description": "包含剪辑结果的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "output_file": {
            "type": "OutputFile",
            "description": "输出视频文件路径（成功时）",
            "optional": true
          },
          "duration": {
            "type": "number",
            "description": "剪辑后的时长（秒）（成功时）",
            "optional": true
          },
          "start_time": {
            "type": "number",
            "description": "开始时间（成功时）",
            "optional": true
          },
          "end_time": {
            "type": "number",
            "description": "结束时间（成功时）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": ["FILE_NOT_FOUND", "INVALID_START_TIME", "INVALID_TIME_RANGE", "TIME_OUT_OF_RANGE", "TRIM_ERROR"]
          }
        }
      }
    },
    {
      "name": "resize_video",
      "description": "调整视频尺寸，支持按宽度、高度或缩放比例调整",
      "parameters": [
        {
          "name": "video_path",
          "type": "InputFile",
          "description": "输入视频文件路径",
          "required": true
        },
        {
          "name": "width",
          "type": "integer",
          "description": "目标宽度（像素），可选",
          "required": false
        },
        {
          "name": "height",
          "type": "integer",
          "description": "目标高度（像素），可选",
          "required": false
        },
        {
          "name": "scale",
          "type": "number",
          "description": "缩放比例（如 0.5 表示缩小到原来的 50%），可选",
          "required": false
        },
        {
          "name": "output_path",
          "type": "string",
          "description": "输出视频文件路径（可选）",
          "required": false
        }
      ],
      "returns": {
        "type": "object",
        "description": "包含调整结果的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "output_file": {
            "type": "OutputFile",
            "description": "输出视频文件路径（成功时）",
            "optional": true
          },
          "original_size": {
            "type": "object",
            "description": "原始尺寸（成功时）",
            "optional": true
          },
          "new_size": {
            "type": "object",
            "description": "新尺寸（成功时）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": ["FILE_NOT_FOUND", "MISSING_SIZE_PARAMETER", "RESIZE_ERROR"]
          }
        }
      }
    },
    {
      "name": "extract_audio_segment",
      "description": "从音频文件中提取指定时间段",
      "parameters": [
        {
          "name": "audio_path",
          "type": "InputFile",
          "description": "输入音频文件路径",
          "required": true
        },
        {
          "name": "start_time",
          "type": "number",
          "description": "开始时间（秒）",
          "required": true
        },
        {
          "name": "end_time",
          "type": "number",
          "description": "结束时间（秒）",
          "required": true
        },
        {
          "name": "output_path",
          "type": "string",
          "description": "输出音频文件路径（可选）",
          "required": false
        }
      ],
      "returns": {
        "type": "object",
        "description": "包含提取结果的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "output_file": {
            "type": "OutputFile",
            "description": "输出音频文件路径（成功时）",
            "optional": true
          },
          "duration": {
            "type": "number",
            "description": "提取的音频时长（秒）（成功时）",
            "optional": true
          },
          "start_time": {
            "type": "number",
            "description": "开始时间（成功时）",
            "optional": true
          },
          "end_time": {
            "type": "number",
            "description": "结束时间（成功时）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": ["FILE_NOT_FOUND", "INVALID_START_TIME", "INVALID_TIME_RANGE", "TIME_OUT_OF_RANGE", "EXTRACT_ERROR"]
          }
        }
      }
    },
    {
      "name": "get_video_info",
      "description": "获取视频文件的详细信息，包括时长、分辨率、帧率等",
      "parameters": [
        {
          "name": "video_path",
          "type": "InputFile",
          "description": "视频文件路径",
          "required": true
        }
      ],
      "returns": {
        "type": "object",
        "description": "包含视频信息的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "info": {
            "type": "object",
            "description": "视频详细信息（成功时）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": ["FILE_NOT_FOUND", "INFO_ERROR"]
          }
        }
      }
    }
  ],
  "execution_environment": {
    "cpu": "1",
    "memory": "1Gi"
  }
}
